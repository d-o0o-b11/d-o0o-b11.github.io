---
title: 바텀 시트
description: 세번째 고난
# author: d_o0o_b
categories: [Minime]
tags: [typography]
# pin: true
math: true
mermaid: true
---

## 개요

React Native에서 바텀 시트를 구현하는 과정에서 두 가지 주요 문제를 겪었습니다.

1. 바텀 시트가 탭 UI 위에 표시되어야 합니다.  
2. 바텀 시트 안에서 `TextInput`을 사용할 경우 키보드와의 높이 조정 이슈가 발생합니다.

이번 글에서는 이 두 문제를 해결해 나가는 과정과 그 과정에서의 고민을 정리해 보았습니다.

<br/>

## 문제 1. 바텀 시트가 탭 UI를 덮어야 한다.

처음에는 [`@gorhom/bottom-sheet`](https://github.com/gorhom/react-native-bottom-sheet) 라이브러리를 사용했습니다.

하지만 바텀 시트를 띄우면 하단 탭 네비게이션보다 아래에 위치하는 현상이 발생했습니다.  
원하는 UI는 바텀 시트가 **탭을 덮는 구조**였기에 단순히 공식 예제를 따라서는 해결되지 않았습니다.

### 문제 화면
> 탭 UI를 가리지 못하고 그 위에서 올라오는 바텀 시트

![문제 화면](https://github.com/user-attachments/assets/59cc0a91-4686-4c06-88df-14a7e16e2d22?raw=true){: w='300' }


### 해결 방법
<!-- 해답은 생각보다 단순했습니다. **`BottomSheetModalProvider`의 위치**가 관건이었습니다. 해당 컴포넌트를 정확한 위치에 배치해야 바텀 시트가 제대로 탭을 덮고 올라오게 됩니다. -->

문제의 원인은 `BottomSheetModalProvider`의 위치에 있습니다.  
**`NavigationContainer` 외부에서 `BottomSheetModalProvider`를 감싸야 바텀 시트가 탭보다 위에 나타납니다.**

[참고한 유튜브 영상](https://youtu.be/oIEykI5oagI?si=917g4yysij1ZbBU1)


### 구현 목표 화면
![정상 화면](https://github.com/user-attachments/assets/ece5698e-4868-4314-ab3a-968bc73813e8?raw=true){: w='400' }


<br/>

## 문제 2. 바텀 시트 높이 동적 조정
> `TextInput` + 키보드 대응

`TextInput`을 바텀 시트 안에서 사용할 경우 키보드가 올라오면서 UI가 꼬이는 문제가 발생하였습니다.

### 문제 화면 
> 높이 100%로 설정했을 때 불필요한 여백이 발생하는 화면

![Image](https://github.com/user-attachments/assets/b6ae6ab0-909c-4a06-bad4-11fccae47f7f?raw=true){: w='300' }


### 주요 문제
- 키보드보다 바텀 시트 높이가 낮으면 **키보드가 가려지거나 올라오지 않습니다..**
- 반대로 바텀 시트 높이를 너무 크게 설정하면 **불필요한 여백**이 생깁니다.


### 해결 방법

```tsx
const screenHeight = Dimensions.get('window').height;
const keyboardHeight = useKeyboardHeight();
const sheetHeight = keyboardHeight > 0 ? screenHeight * 0.6 : screenHeight * 0.4;
```

이처럼 키보드 유무에 따라 시트 높이를 유동적으로 설정하였습니다.

#### 여전히 다음과 같은 문제가 존재한다.
- 높이 계산 반영이 느림
- 키보드 이벤트와 애니메이션 간 충돌
- 버튼 활성화 상태가 잘못되는 오류


<br/>


## 고민거리

### 1. 라이브러리를 계속 사용할 것인가?
- 원하는 대로 동작하지 않을 때 문제 해결에 시간이 소요됩니다.
- 직접 구현하면 유연하게 제어 가능하지만 개발 및 유지보수 비용이 증가합니다.

--- 

### 2. 높이 조정 로직의 안정성
- 현재 방식은 완전하지 않으며 더 안정적인 대안이 필요합니다.
- 다른 라이브러리 도입 여부도 고려 중입니다.

<br/>

## 마무리 

현재 방식은 기본적인 동작은 하지만 완성도와 안정성 측면에서 아쉬움이 남습니다.
바텀 시트를 직접 구현할지, 라이브러리를 계속 활용하며 최적화할지를 고민 중이며 앞으로도 지속적인 테스트를 통해 최적의 해결책을 찾을 예정입니다.

<br/>
.
<br/>
.
<br/>
.
<br/>


## 그리고... 엎었다. 다시. (2025-04-06)
사실 이 방식으로 계속 가보려고 했습니다. 하지만...

MVP에서 바텀 시트는 핵심 기능이었고 자잘한 오류를 안고 가기엔 리스크가 너무 컸습니다.

테스트 도중 바텀 시트를 열고 닫거나, 버튼 비활성화 여부를 제어하는 과정에서 잦은 오류가 발생했고
이런 경험은 사용자에게도 피로감을 줄 수 있다고 판단하였습니다.

그래서 **한 주를 더 투자해 바텀 시트를 직접 구현**하기로 결정하였습니다.

<br/>

## 직접 구현한 바텀 시트
결과는 **성공적**이었습니다.
애니메이션 기반 바텀 시트를 직접 만들었고 이전의 문제들이 모두 해결되었습니다.

### 깨달음 1. 탭을 직접 제어할 수 있다.
라이브러리를 사용할 때는 "탭을 가리는 것"이 큰 장애물처럼 느껴졌습니다.
하지만 직접 개발하니 탭을 자유롭게 제어할 수 있었고 문제 1번은 사실 문제가 아니었습니다.

```tsx
tabBarStyle: shouldHideTabBar
```

이처럼 간단하게 탭 숨김 처리를 제어할 수 있었습니다.
그동안 바텀 시트 라이브러리에만 집중하느라 숲을 보지 못하고 있었던 것입니다.

<!-- 사실 라이브러리 사용하고도 탭 제어가 가능합니다. 하지만 그 당시엔 바텀시트 라이브러리에만 집중한 나머지 숲을 보지 못하였습니다. -->
<!-- 라이브러리에 매몰되어 문제를 복잡하게 바라봤던 것 같습니다. -->


---

### 깨달음 2. 키보드 대응도 수월해졌습니다.
가장 골치 아팠던 `TextInput`과 키보드 대응 문제도 말끔히 해결되었습니다.

- 키보드 높이에 따라 바텀 시트가 자연스럽게 애니메이션되며 높이 조정됨
- 이전 상태를 기억하는 오류 제거
- 버튼 활성화 로직도 명확하게 개선됨

<br/>

## 찐 마무리! 
이번 경험을 통해 확실히 느꼈습니다. **라이브러리는 항상 정답이 아닙니다.**

빠르게 구현해야 할 때는 유용한 선택지가 될 수 있지만   
**핵심 기능이라면 직접 구현하는 것이 더 안정적이며, 내가 원하는 방식대로 제어할 수 있습니다.**

장기적으로 유지보수나 확장성 측면에서도 더 유리하다고 생각합니다.

이번 경험을 통해 개발자로서 한층 성장한 느낌이 들었고
앞으로도 라이브러리에만 의존하지 않고 필요할 땐 직접 부딪히는 자세를 잃지 않으려 합니다.
