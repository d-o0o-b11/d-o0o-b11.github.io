---
title: 소셜 로그인 구현
description: 첫번째 고난
# author: d_o0o_b
categories: [Minime]
tags: [typography]
# pin: true
math: true
mermaid: true
---


## 읽기 전 참고

- [OAuth란 무엇인가?](https://d-o0o-b11.github.io/posts/oauth-dev-note/)
- [OAuth 백엔드 구현 구조](https://d-o0o-b11.github.io/posts/oauth-backend/)
- [Access Token Blacklist 관리하기](https://d-o0o-b11.github.io/posts/token-blacklist/)

<br/>


## 공식문서 따라하기
참고 문서: [expo 공식 인증 가이드](https://docs.expo.dev/guides/authentication/)

### 문제 1. Expo Go에서는 작동하지 않는다.

공식 문서를 보면 다음과 같은 경고가 보입니다.

> 사용자 지정 네이티브 코드가 필요하기 때문에 Expo Go 앱에서 사용할 수 없습니다.
{: .prompt-warning }

처음 React Native를 접하면서 Expo Go 앱으로 개발을 테스트하던 저는 이 문장을 읽고 **멘붕**이 왔습니다.  

실제로 구글 로그인 기능을 등록하려면 **앱의 패키지 이름**과 **SHA-1 인증서 지문**이 필요합니다.  
이 정보는 **빌드한 앱**에서만 확인할 수 있는 정보이고 Expo Go에서는 구현 자체가 불가능하다는 사실을 깨달았습니다.

![SHA 등록 이미지](https://github.com/user-attachments/assets/90b3495a-48a2-4212-8163-8af2e368d5e5?raw=true){: w='400' }

---

### 문제 2. Google Play에 먼저 업로드해야 하는가?

문서에서는 Google 로그인 설정을 위해 Google Play Console에 앱을 등록하라고 안내하고 있습니다.  

"로그인을 개발하려면 앱을 업로드해야 하는 건가?" 하는 의문이 들었습니다.

찾아보니 꼭 업로드까지 해야 하는 건 아니었고  
`eas credentials`를 통해 인증서를 발급받고 필요한 값을 설정하여 로그인 기능을 테스트할 수 있었습니다.

문제는 여기서 끝나지 않았습니다.  

**웹에서는 로그인에 성공하지만 앱에서는 mismatch 오류가 발생**하였습니다.

가능한 모든 설정(SHA 키, redirect URI, 패키지명 등)을 검토했지만 원인을 특정하지 못했습니다.
더 이상 시간을 쓰기보다는 일단 다른 방법을 모색하기로 했습니다. 😅

<br/>

## Plan B: 웹뷰 방식으로 우회

결국 1차 MVP에서는 **웹뷰(WebView) 방식**을 도입하기로 결정하였습니다.  
백엔드에서 OAuth 인증을 처리하고 성공 시 JWT 토큰을 앱에 전달하는 구조로 설계하였습니다.

이 방식은 비교적 구현이 간단했고 테스트 환경에서도 큰 문제 없이 작동했습니다.  

<br/>

## 웹뷰 방식의 한계
웹뷰 방식이 쉬운 만큼 한계도 명확했습니다.

- 네이티브 SDK처럼 **자동 로그인**이 불가능합니다.
- 매번 **아이디/비밀번호를 입력**해야 할 수 있습니다.
- 앱 내 흐름이 끊기고 UX가 **덜 직관적**합니다.
- 세션 유지가 불안정하고 **보안 취약점**이 생길 가능성도 있습니다.


<br/>

## SDK vs WebView 비교표

| 항목             | 네이티브 SDK                                   | 웹뷰 방식                                       |
|------------------|--------------------------------------------------|------------------------------------------------|
| 로그인 방식       | 앱 내에서 직접 로그인 (OAuth 자동 처리)        | 브라우저(웹뷰)에서 로그인 후 리디렉션 처리     |
| 사용자 경험 (UX) | 매끄러운 로그인, 원클릭 가능                    | 매번 아이디/비밀번호 입력 필요 가능성 있음     |
| 보안             | SDK 내부에서 OAuth 처리, 더 안전                | 토큰 직접 관리 필요, 보안 취약점 생길 수 있음  |
| 세션 유지        | 앱이 백그라운드 가도 유지됨                    | 앱 재시작 시 세션 유지 어려움                  |
| 구현 난이도       | 복잡 (SHA 키, 패키지명 등 설정 필요)            | 상대적으로 간단                                |
| 개발 환경 제약    | Expo Go 불가, 빌드 필수                         | Expo Go에서도 테스트 가능                      |


<br/>

## 회고: 1차 MVP의 현실적인 선택

소셜 로그인은 앱에서 흔히 사용되지만 **초보 개발자에게는 진입장벽이 꽤 높은 기능**입니다.  
특히 **Expo를 사용하는 React Native 환경**에서는 **제약사항이 많으며** 구글/카카오 각각의 SDK 사용법도 다르기 때문에 더 복잡하게 느껴졌습니다.

결국 이번 1차 MVP에서는 **웹뷰 방식을 선택**했지만 향후에는 **Expo Custom Dev Client**를 구축해  
**네이티브 SDK 방식으로 리팩터링**할 계획입니다.

이번 경험을 통해 로그인 기능 하나만으로도 정말 많은 것을 배울 수 있었습니다.  
기술 선택, UX 고려, 보안과 유지보수까지 단순히 기능 구현을 넘어서 여러 요소를 고민하게 되었습니다.




<!-- ### 문제점 1. Expo Go 앱에서 사용 불가

> 사용자 지정 네이티브 코드가 필요하기 때문에 Expo Go 앱에서 사용할 수 없습니다.

React Native 개발을 처음 시작하면서 Expo Go 앱을 이용해 튜토리얼을 따라가고 있었습니다. 그런데 소셜 로그인을 구현하려고 공식 문서를 읽자마자 큰 멘붕이 왔습니다.

![Image](https://github.com/user-attachments/assets/90b3495a-48a2-4212-8163-8af2e368d5e5?raw=true){: w='400' }

실제로 구글 소셜 로그인을 등록하려면 패키지 이름과 SHA-1 인증서 디지털 지문 입력이 필요해서 빌드가 필수적이었습니다. -->

<!-- --- -->

<!-- ### 문제점 2. Google Play Store 업로드 필요?

문서를 보면 Google Play Store에 앱을 업로드하라고 나와 있습니다.

"로그인 개발하려면 앱을 업로드해야 하는 건가?" 하는 의문이 들었고 여러 개발 블로그를 참고한 끝에 `eas credentials`로 인증서를 발급받을 수 있었습니다.

이 과정까지 거치고 나니 웹사이트에서는 로그인이 정상적으로 작동했지만 빌드한 앱에서는 mismatch 오류가 발생했습니다. 결국 이 mismatch 문제를 해결하지 못해서 SDK 방식을 끝까지 적용하지 못했습니다. 😅 -->


<!-- ## 웹뷰 사용

웹뷰 방식은 상대적으로 어려운 부분이 없었습니다.

[참고 구조](https://d-o0o-b11.github.io/posts/oauth-backend/)
[OAuth 적용 글에 추가로 BlackList 추가한 글 보러가기](https://d-o0o-b11.github.io/posts/token-blacklist/)

## 웹뷰 방식이 최선은 아니었던 이유

웹뷰 방식으로 소셜 로그인을 구현하는 것은 상대적으로 간단했지만 몇 가지 단점이 있어서 사실 끝까지 이 방법을 쓰고 싶지는 않았습니다.

이유는 사용자 경험을 저하시킬 수 있기 때문입니다.

네이티브 SDK를 사용하면 앱 내에서 매끄럽게 로그인할 수 있지만 웹뷰 방식은 사용자가 별도의 로그인 창을 거쳐야 해서 흐름이 끊깁니다.
예를 들어, 구글 로그인을 할 때 네이티브 SDK를 사용하면 자동으로 앱이 실행되어 로그인 처리가 되지만 웹뷰는 사용자가 매번 아이디/비밀번호를 입력해야 합니다.

사용자 입장에서 불편함을 느낄 수 있는 부분입니다.

<br/>


### SDK vs WebView

|  |  네이티브 SDK	   | 웹뷰  |
|:-------- |:--------------------------- |:---------------------------|
| 로그인 방식 | 앱 내에서 직접 로그인 (OAuth Flow 자동 처리) | 브라우저(웹뷰)에서 로그인 후 리디렉션 |
| UX(사용자 경험) | 매끄러운 로그인, 원클릭 가능 | 아이디/비밀번호 입력 필요할 수도 있음 |
| 보안  | OAuth 인증이 SDK 내부에서 처리됨 (더 안전) | 토큰을 직접 다뤄야 해서 보안 취약점 발생 가능 | 
| 세션 유지 | 안정적 (앱이 백그라운드 가도 유지됨) | 앱 재시작 시 세션 날아갈 가능성 있음 |
| 구현 난이도 | 설정이 복잡할 수 있음 | 상대적으로 간단 |
| 에러 해결 | SHA 키, 패키지 이름 등 설정이 필요함 | 로그인 과정 자체는 단순 | -->



