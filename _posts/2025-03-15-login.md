---
title: 로그인
description: 첫번째 고난
# author: d_o0o_b
categories: [Minime]
tags: [typography]
# pin: true
math: true
mermaid: true
---

## 읽기 전 참고

[OAuth 란?](http://127.0.0.1:4000/d-o0o-b11.github.io/posts/oauth-dev-note/)


## 들어가기

### 공식문서 따라하기

[expo 공식문서](https://docs.expo.dev/guides/authentication/)


#### 문제점 1. Expo Go 앱에서 사용 불가

> 사용자 지정 네이티브 코드가 필요하기 때문에 Expo Go 앱에서 사용할 수 없습니다.

React Native 개발을 처음 시작하면서 Expo Go 앱을 이용해 튜토리얼을 따라가고 있었습니다. 그런데 소셜 로그인을 구현하려고 공식 문서를 읽자마자 큰 멘붕이 왔습니다.

![Image](https://github.com/user-attachments/assets/90b3495a-48a2-4212-8163-8af2e368d5e5?raw=true){: w='400' }

실제로 구글 소셜 로그인을 등록하려면 패키지 이름과 SHA-1 인증서 디지털 지문 입력이 필요해서 빌드가 필수적이었습니다.


#### 문제점 2. Google Play Store 업로드 필요?

문서를 보면 Google Play Store에 앱을 업로드하라고 나와 있습니다.

"로그인 개발하려면 앱을 업로드해야 하는 건가?" 하는 의문이 들었고 여러 개발 블로그를 참고한 끝에 `eas credentials`로 인증서를 발급받을 수 있었습니다.

이 과정까지 거치고 나니 웹사이트에서는 로그인이 정상적으로 작동했지만 빌드한 앱에서는 mismatch 오류가 발생했습니다. 결국 이 mismatch 문제를 해결하지 못해서 SDK 방식을 끝까지 적용하지 못했습니다. 😅


### 웹뷰 사용

웹뷰 방식은 상대적으로 어려운 부분이 없었습니다.

[참고 구조](http://127.0.0.1:4000/d-o0o-b11.github.io/posts/oauth-backend/)

## 웹뷰 방식이 최선은 아니었던 이유

웹뷰 방식으로 소셜 로그인을 구현하는 것은 상대적으로 간단했지만 몇 가지 단점이 있어서 사실 끝까지 이 방법을 쓰고 싶지는 않았습니다.

이유는 사용자 경험을 저하시킬 수 있기 때문입니다.

네이티브 SDK를 사용하면 앱 내에서 매끄럽게 로그인할 수 있지만 웹뷰 방식은 사용자가 별도의 로그인 창을 거쳐야 해서 흐름이 끊깁니다.
예를 들어, 구글 로그인을 할 때 네이티브 SDK를 사용하면 자동으로 앱이 실행되어 로그인 처리가 되지만 웹뷰는 사용자가 매번 아이디/비밀번호를 입력해야 합니다.

사용자 입장에서 불편함을 느낄 수 있는 부분입니다.

<br/>


### SDK vs WebView

|  |  네이티브 SDK	   | 웹뷰  |
|:-------- |:--------------------------- |:---------------------------|
| 로그인 방식 | 앱 내에서 직접 로그인 (OAuth Flow 자동 처리) | 브라우저(웹뷰)에서 로그인 후 리디렉션 |
| UX(사용자 경험) | 매끄러운 로그인, 원클릭 가능 | 아이디/비밀번호 입력 필요할 수도 있음 |
| 보안  | OAuth 인증이 SDK 내부에서 처리됨 (더 안전) | 토큰을 직접 다뤄야 해서 보안 취약점 발생 가능 | 
| 세션 유지 | 안정적 (앱이 백그라운드 가도 유지됨) | 앱 재시작 시 세션 날아갈 가능성 있음 |
| 구현 난이도 | 설정이 복잡할 수 있음 | 상대적으로 간단 |
| 에러 해결 | SHA 키, 패키지 이름 등 설정이 필요함 | 로그인 과정 자체는 단순 |



<br/>


## 서버 AT/RT 발급
> 로그인 후 AT/RT 발급 과정은 위의 블로그 링크에서 확인할 수 있습니다.

### Token 유효한가?

![Image](https://github.com/user-attachments/assets/ca936050-ad14-41fb-9892-38617cf622fa?raw=true){: w='400' }

### AT 재발급

![Image](https://github.com/user-attachments/assets/a7797adc-4d4f-4974-914a-1b929fdb3e0c?raw=true){: w='400' }




