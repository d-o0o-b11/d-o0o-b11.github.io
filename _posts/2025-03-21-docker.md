---
title: Docker
description: 구조 + 최종 정리
# author: d_o0o_b
categories: [Dev-Notes, Theory]
tags: [typography]
# pin: true
math: true
mermaid: true
---

## Docker 란?

애플리케이션을 빠르게 개발하고 배포하며 실행할 수 있는 플랫폼입니다. 컨테이너 기술을 사용하여 애플리케이션을 실행하는 데 필요한 모든 요소(코드, 라이브러리, 종속성 등)를 하나의 패키지로 묶어서 실행할 수 있습니다. 이를 통해 애플리케이션의 실행 환경이 어디서나 동일하게 유지됩니다.

### 구조

크게 클라이언트(Client), 서버(Server), 이미지(Images), 컨테이너(Containers) 4가지 주요 요소로 구성됩니다.

- Docker Client 
  - 사용자가 도커 명령어를 입력하는 부분
  - 도커 CLI(Command Line Interface)에서 실행하는 명령을 통해 도커 서버와 상호작용
- Docker Daemon (Server) 
  - 실제로 도커 컨테이너를 관리하고 실행하는 백엔드 부분 
  - Docker Daemon은 클라이언트의 요청을 받아 컨테이너의 생성, 실행, 중지 등의 작업 처리
- Docker Images <br/>
  - 애플리케이션을 실행하는 데 필요한 파일들(코드, 라이브러리, 의존성 등)을 포함하는 불변적인 템플릿 
  - 컨테이너를 실행하기 위해서는 반드시 이미지가 필요
- Docker Containers <br/> 
  - 도커 이미지로부터 생성된 실행 중인 인스턴스 
  - 컨테이너는 격리된 환경에서 실행되며,필요한 라이브러리와 의존성을 모두 포함하고 있어 애플리케이션을 독립적으로 실행할 수 있음

### 구성 요소

![Image](https://github.com/user-attachments/assets/2551199c-10db-4c32-b016-7f5e55ff23b1?raw=true)

1. Docker Client
  - 사용자가 도커 명령어를 입력하는 곳으로 도커 클라이언트는 도커 서버(daemon)와 통신하여 컨테이너 작업 수행
  - ex. `docker run`, `docker build` 등의 명령어를 통해 도커 데몬에 요청 전달
2. Docker Daemon (Docker Engine)
  - 도커 클라이언트로부터 요청을 받아 실행하는 서버
  - 도커 데몬은 컨테이너를 실행/관리하고 이미지를 빌드 함
3. Docker Images
  - 애플리케이션을 실행하는 데 필요한 모든 파일을 포함한 템플릿
  - 이미지는 불변(immutable)으로 **컨테이너는 이 이미지를 기반**으로 실행
  - 이미지는 여러 계층으로 구성되어 있으며 각 계층은 파일 시스템의 차이를 나타냄
4. Docker Containers
  - 도커 이미지의 실행 가능한 인스턴스 
  - 각 컨테이너는 독립적인 실행 환경을 제공
  - 컨테이너는 시스템의 리소스를 공유하지만 다른 컨테이너와 격리된 상태로 실행됨
5. Docker Registry
  - 이미지를 저장하고 관리하는 곳
  - 가장 많이 사용되는 도커 레지스트리는 Docker Hub이며 사용자는 이미지를 레지스트리에서 다운로드하거나 업로드할 수 있음
  - 공개/비공개


### Workflow

1. Dockerfile 작성
  - 도커 이미지를 빌드하기 위한 구성 파일 작성 
  - Dockerfile은 애플리케이션이 실행되기 위한 환경을 정의하는 스크립트

2. 이미지 빌드
  - 작성된 Dockerfile을 기반으로 docker build 명령어를 실행하여 도커 이미지를 생성

3. 컨테이너 실행
  - `docker run` 명령어를 사용하여 빌드된 이미지를 바탕으로 컨테이너를 실행
  - 이때 컨테이너는 애플리케이션을 실행하는 독립적인 환경이 됨

4. 컨테이너 관리
  - 도커는 여러 컨테이너를 실행할 수 있으며 실행 중인 컨테이너를 관리하기 위한 명령어들(docker ps, docker stop, docker logs 등)을 제공

### 주요 기능 4가지

1. 컨테이너화(Containerization)
  - 애플리케이션을 실행하는 데 필요한 모든 파일을 포함한 경량화된 환경 제공
  - 이를 통해 애플리케이션은 개발, 테스트, 배포 환경에서 항상 일관된 실행 보장

2. 빠른 시작과 종료
  - 컨테이너는 경량화된 가상화 기술이기 때문에 빠르게 시작하고 종료할 수 있음 
  - 이는 리소스를 효율적으로 사용하고 애플리케이션을 빠르게 배포할 수 있게 함

3. 이식성(Portability)
  - 도커는 다양한 환경에서 동일하게 실행될 수 있도록 설계 됨
  - 개발자 시스템에서부터 프로덕션 서버까지 동일한 방식으로 실행 됨

4. 이미지 기반 배포
  - 도커 이미지는 애플리케이션의 모든 의존성을 포함하고 있어 이미지를 사용하여 언제 어디서나 동일한 애플리케이션 환경을 실행할 수 있음


## Docker vs Kubernetes

### Docker

주로 컨테이너를 만들고 실행하는 데 사용됩니다. 도커는 애플리케이션을 독립적인 환경에서 실행할 수 있도록 해줍니다. 하지만 여러 컨테이너가 필요한 환경에서는 컨테이너 오케스트레이션이 필요합니다.

### Kubernetes

이러한 도커 컨테이너들을 관리하고 자동화하는 오케스트레이션 툴입니다. 여러 개의 컨테이너를 분산하여 실행하고, 모니터링하며, 관리합니다. 쿠버네티스는 클러스터 단위로 작동하며, 도커를 런타임으로 사용할 수 있습니다.


> 도커와 쿠버네티스를 비교해 보면, 도커는 단일 애플리케이션 컨테이너화에 집중하고, 쿠버네티스는 그 컨테이너들의 배치, 네트워크, 스케일링 등을 관리하는 데 중점을 둡니다.
{: .prompt-info }