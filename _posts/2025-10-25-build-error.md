---
title: Expo SDK 버전 충돌 사건
description: 이틀간의 버전 지옥 탈출기와 프로젝트 재구축 결정
# author: d_o0o_b
categories: [OrbitMe]
tags: [typography]
# pin: true
math: true
mermaid: true
---


## 개요

드디어 실기기에서 테스트를 해볼 시간이 왔습니다.
그동안 에뮬레이터로만 개발하다가 처음으로 실제 폰에 앱을 설치해보려 했는데...

버전 오류,,
오랜만?
오랜만도 아닌데 벌써 버전이 54까지 나왔습니다.

[Expo SDK54 문서](https://expo.dev/changelog/sdk-54)

현재 내 프로젝트는 52였어서 버전 충돌이 많이 일어난 상태였습니다.

**Expo SDK의 빠른 업데이트:**
- 2024년 초: SDK 52 릴리스
- 2024년 중반: SDK 53 릴리스
- 2024년 하반기: SDK 54 릴리스

평균 2-3개월마다 메이저 버전이 업데이트되는 Expo의 특성상, 조금만 방심하면 버전이 뒤처지게 됩니다.


## 에러를 인지한 순간

### 에뮬레이터는 괜찮았는데...

애뮬레이터로 켰을 때는 문제 없이 개발이 가능했는데,
폰으로 테스트하려고 하니 버전 오류가 떴었습니다.

```
Error: Expo SDK version mismatch.
Expected: 52.x.x
Found: 54.x.x
```

**왜 에뮬레이터에서는 문제가 없었을까?**
- 에뮬레이터의 Expo Go 앱을 오래전에 설치했고 자동 업데이트가 꺼져있었음
- 실제 폰의 Expo Go는 최신 버전(SDK 54 지원)으로 자동 업데이트됨
- 개발 환경과 실행 환경의 SDK 버전 불일치 발생

### 간단할 줄 알았던 해결책

공식문서를 보고 expo 버전업만 하면 되겠구나! 싶었지만,
버전업을 하고도 에러가 계속 잡히는 문제가 발생했습니다.

**시도했던 방법 1: Expo CLI 업그레이드**
```bash
npm install expo@latest
expo upgrade
```

→ 결과: 새로운 에러 발생


### 범인을 찾을 수 없었던 이유

너무 뒤늦게 에러를 발견해서 추가된 코드가 문제인건지, 기존 코드가 이젠 지원이 안되는건지 감이 안잡혔습니다.

**문제 파악의 어려움:**
1. 마지막으로 실기기 테스트를 한 지 2주 경과
2. 그동안 추가된 코드: 약 2,000줄
3. 설치된 새로운 패키지: 8개
4. 변경 사항이 너무 많아 원인 특정 불가

**일반적인 디버깅 방법이 통하지 않았던 이유:**
- 에러 메시지가 너무 추상적 ("main has not been registered"가 정확히 뭘 의미하는지?)
- 스택 트레이스가 네이티브 모듈 내부를 가리킴 (내 코드가 아님)
- Git history를 보며 하나씩 롤백해도 에러가 사라지지 않음


## 시도한 해결 방법들

### 1. 패키지 재설치

```bash
rm -rf node_modules
npm cache clean --force
npm install
```

→ 실패

### 2. 개별 패키지 버전 조정

의심되는 패키지들의 버전을 하나씩 조정해봤습니다:

```json
{
  "react-native-reanimated": "~3.8.0" → "~3.10.0",
  "react-native-gesture-handler": "~2.16.0" → "~2.18.0",
  "react-native-screens": "~3.29.0" → "~3.31.0"
}
```

→ 일부 에러는 해결되었지만 새로운 에러 발생

### 3. AI의 도움

그래서 AI의 도움을 받으면서 해결하려고 하였으나,, AI도 버전 문제는 해결을 잘 못하는 것 같습니다. (내가 잘 못 쓰는걸 수도 있습니다.)

**AI에게 질문한 내용들**
1. "Expo SDK 52에서 54로 업그레이드 하는 방법"
2. "react-native-reanimated undefined 에러 해결"
3. "Invariant Violation main has not been registered"

**AI의 답변**
- 일반적인 해결책 제시 (이미 다 시도해봄)
- 공식 문서 링크 (이미 다 읽어봄)
- 패키지 버전 맞추기 (이미 다 해봄)

**AI가 도움이 안 되었던 이유**
- 프로젝트 특수한 설정을 모름
- 설치된 패키지 간의 복잡한 의존성 파악 불가
- 에러 메시지만으로는 컨텍스트 이해 부족


## 극단적 해결 방법

### 이틀간의 고통

이틀을 해당 문제를 풀기 위해 머리를 썼습니다.
하지만, 돌아오는 건 에러 화면 뿐,,,,

**시도한 방법 총정리:**
1. Expo SDK 업그레이드 (실패)
2. 개별 패키지 버전 조정 (실패)
3. Metro bundler 캐시 삭제 (실패)
4. Android Studio 캐시 삭제 (실패)
5. Expo Go 재설치 (실패)
6. Stack Overflow 검색 (해결 안 됨)

**정신적 피로:**
- 1일차: "해결할 수 있다!"
- 2일차 오전: "시간이 좀 걸리겠지만 가능하다"
- 2일차 오후: "진짜... 뭐가 문제야..."
- 2일차 밤: "차라리 새로 만드는 게..."

### 결단: 프로젝트 재구축

차라리 새로 레포를 파서 다시 만드는게 더 빠를 것 같다는 판단이 들어서 레포를 파서 다시 처음부터 시작했습니다!

**결정 과정:**

**선택지 1: 계속 디버깅**
- 예상 소요 시간: 알 수 없음
- 성공 가능성: 불확실
- 정신 건강: 위험

**선택지 2: 프로젝트 재구축**
- 예상 소요 시간: 1일
- 성공 가능성: 100%
- 추가 이점: 깔끔한 코드베이스

**선택 2를 고른 이유:**

다행이도 MVP 기능들만 있다보니 이 방법을 사용할 수 있었습니다.
후에 버전 에러가 발생한다면 그때는 되돌아갈 순 없겠지만, 지금은 이 방법이 좋은 것 같다고 생각합니다.

필요한 코드를 하나씩 옮겨가면서 어디서 에러가 발생하는지에 대해서 보니
못찾을만 했습니다 ㅎㅋ,,
여러 패키지에서 에러가 발생했고 제가 본 에러로는 유추를 못하는 수준이었습니다.


## 배운 점

### 1. 버전 관리의 중요성

차라리 지금 겪어서 좋았다고 생각이 듭니다.
기능이 더 많이 쌓인 상태에서 해당 문제가 발생하게 되면 멘붕이 좀 크게 올 것 같습니다.

### 2. 정기적인 실기기 테스트

**교훈**
- 에뮬레이터만 믿지 말기
- 최소 주 1회 실기기 테스트 필수


### 3. AI 도구의 한계 인지

**AI가 도움이 되는 경우**
- 일반적인 문법 질문
- 코드 예시
- 알고리즘 설명
- 리팩토링 제안

**AI가 도움이 안 되는 경우**
- 프로젝트 특수한 설정 문제
- 복잡한 버전 의존성 이슈
- 네이티브 모듈 에러
- 환경별 차이 (개발/프로덕션)

**AI와 함께 일하는 법**
- 일반적인 솔루션 빠르게 얻기
- 하지만 맹신하지 않기
- 직접 공식 문서 확인하기
- 커뮤니티 의견도 참고하기


## 마치며

2일간의 고통스러운 디버깅이었지만, 많은 것을 배웠습니다.

**핵심 교훈:**
1. 문제가 안 풀리면 다른 방법을 시도하라
2. 투자한 시간에 집착하지 마라 
3. 정기적인 실기기 테스트는 필수
4. 버전 관리는 신중하게
5. MVP로 시작하는 것의 중요성

앞으로는 이런 문제가 발생하지 않도록 더 체계적으로 개발을 진행하겠습니다.

그래도 지금 겪어서 다행입니다.
나중에 규모가 커진 상태에서 이런 일이 발생했다면...
상상만 해도 끔찍하네요!